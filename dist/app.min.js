function cardLayout(e,t){e.data=[],e.layout={step:25,currentSize:25,expand:function(){this.currentSize<e.data.length&&(this.currentSize+=this.step,angular.element(".collapsible").collapsible())},isOver:function(){return this.currentSize<e.data.length}},console.log(e.layout),t.$on("searchResponce",function(t,r){e.data=r,e.maxItems=25,console.log(e.data.length)})}function cardSearch(e,t,r){function a(){e.setSelection=[],e.typeSelection=[],e.subtypeSelection=[],e.supertypeSelection=[],e.colorSelection=[],e.raritySelection=[]}angular.element(document).ready(function(){function e(){a.animate({left:"0",right:"0"},r),c.animate({left:"100%",right:"0"},r),o.hide()}function t(){a.animate({left:"-100%",right:"100%"},r),c.animate({left:"0",right:"0"},r)}var r=200,a=$(".search-filters"),n=$(".search-filters__item"),c=$(".search-filters__options"),o=$(".search-filters__body"),i=$("#back-filter"),s=$(".modal-trigger");return i.click(e),s.leanModal({complete:e}),n.each(function(){var e=$(this),r=e.attr("href");e.click(function(e){e.stopPropagation(),e.preventDefault(),o.hide(),$(r).show(),t()})}),{openFilterMenu:e,openFilterOptions:t}});return e.searchQuery={},a(),{getCard:function(t){t.set=e.setSelection,t.type=e.typeSelection,t.subtype=e.subtypeSelection,t.supertype=e.supertypeSelection,t.color=e.colorSelection,t.rarity=e.raritySelection,r.search(t)},clearSearchQuery:function(){e.searchQuery={},a()},toggleSelection:function(e,t){var r=e.indexOf(t);r>-1?e.splice(r,1):e.push(t)},filtersOptions:r.searchFiltersOptions}}function cardView(e,t){var r="ss-";return{currentEdition:0,setActiveEdition:function(e){this.currentEdition=e},isCurrent:function(e){return this.currentEdition===e},getEditionClass:function(e){return r+e.set_id.toLowerCase()},getRarityClass:function(e){return r+e.rarity.toLowerCase()},getFullCardType:function(e){var t=e.subtypes,r=e.supertypes,a=e.types,n=t?["â€”"]:[],c=[];return c=c.concat(r,a,n,t).join(" ")}}}function mtgParser(){var e=function(e,t,r){return e=e||"div",t=t||"",r=r||"","<"+e+' class="'+t+'">'+r+"</"+e+">"},t=function(e){var t=" ms-split",e=e.replace(/\{|\}/g,"").toLowerCase();return!e.match(/p/i)&&e.match(/\//)?"ms ms-"+e.replace("/","")+t:e.match(/t/i)?"ms ms-tap":"ms ms-"+e.replace("/","")};return function(r,a){if(r){var n={mana:{el:"span",classes:"",pattern:/\{[\w, \/]+\}/gi},p:{el:"p",classes:"card-text__p",pattern:/\n/g},reminder:{el:"span",classes:"card-text__reminder",pattern:/\(.+\)/gi}};return a=a||{},a=angular.merge(n,a),r=r.replace(a.p.pattern,"<br />"),r=r.replace(a.mana.pattern,function(r){var n=a.mana.el,c=a.mana.classes+" "+t(r);return e(n,c)}),r=r.replace(a.reminder.pattern,function(t){var r=a.reminder.el,n=a.reminder.classes;return e(r,n,t)})}}}function deckbrewAPI(e,t){var r={method:"GET",url:"https://api.deckbrew.com/mtg/cards",params:{name:""}},a="https://api.deckbrew.com/mtg/",n={colors:["black","blue","green","red","white"],rarity:["common","uncommon","rare","mythic"],formats:["vintage","legacy","modern","standard","commander"]};return e.get(a+"sets").then(function(e){return n.sets=e.data}),e.get(a+"types").then(function(e){return n.types=e.data}),e.get(a+"subtypes").then(function(e){return n.subtypes=e.data}),e.get(a+"supertypes").then(function(e){return n.supertypes=e.data}),{search:function(a){r.params=a,e(r).then(function(e){t.$emit("searchResponce",e.data)},function(e){console.log("Data senderror")})},searchFiltersOptions:n}}angular.module("cardLayout",["cardView"]),angular.module("cardSearch",["ngSanitize"]),angular.module("cardView",[]),angular.module("cardLayout").component("cardLayout",{templateUrl:"assets/html/card-layout/card-layout.template.html",controller:cardLayout}),cardLayout.$inject=["$scope","$rootScope"],angular.module("cardSearch").component("cardSearch",{templateUrl:"assets/html/card-search/card-search.template.html",controller:cardSearch}),cardSearch.$inject=["$scope","$rootScope","deckbrewAPI"],angular.module("cardView").directive("cardView",function(){return{templateUrl:"assets/html/card-view/card-view.template.html",scope:{card:"="},bindToController:!0,replace:!0,restrict:"E",controller:cardView,controllerAs:"$ctrl"}}),cardView.$inject=["$rootScope","$scope"],angular.module("app",["cardSearch","cardLayout"]),angular.module("app").filter("mtgParse",mtgParser),angular.module("app").service("deckbrewAPI",deckbrewAPI),deckbrewAPI.$inject=["$http","$rootScope"],$(document).ready(function(){$("#main-preloader").hide()});